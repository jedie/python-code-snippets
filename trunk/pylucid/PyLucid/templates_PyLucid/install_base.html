{% extends "PyLucid_base.html" %}

{% block title %}PyLucid setup{% endblock %}

{% block base_head %}
<link rel="stylesheet" type="text/css" href="{{ PyLucid_media_url }}install_views.css" />
<script type="text/javascript" src="{{ PyLucid_media_url }}shared_sha_tools.js"></script>
{% block head %}{% endblock %}
{% endblock %}

{% block base_content %}
<h3>PyLucid v{{ version }} - setup@<a href="/" title="{% trans 'goto your PyLucid CMS page' %}">{{ request.META.HTTP_HOST }}</a></h3>
{% if not no_menu_link %}<p><a href="{% url PyLucid.install.index.menu . %}">&#xAB; {% trans 'back to menu' %}</a></p>{% endif %}
{% if page_msg %}
    <fieldset id="page_msg"><legend>page messages</legend>
    {% for message in page_msg %}
      {{ message }}<br />
    {% endfor %}
    </fieldset>
{% endif %}

<noscript>
    <fieldset class="error">
    <legend>{% trans 'JavaScript Error.' %}</legend>
        <strong>{% trans 'You need JavaScript to generate this hash!' %}</strong><br />
        {% trans 'Please enable JavaScript in your browser!' %}
    </fieldset>
     <style type="text/css">
    #check_media, #gen_hash_block {
        /*
        hide the check_media div if javascript is disable
        TODO: Check if a style tag inner noscript area is allowed.
        */
        display: none;
    }
    </style>
</noscript>

<div id="check_media">
<fieldset class="error">
    <legend>{% trans 'Error: Wrong media path.' %}</legend>
      {% trans "It seems that the required JavaScript file isn't loaded!" %}<br />
      {% trans 'Please check the media path in your settings.py in "STATIC FILES".' %}
    <p>
      media path test: {% trans "Please check if you're able to see this file:" %}
      <a href="{{ PyLucid_media_url }}media_path_test.html">{{ PyLucid_media_url }}media_path_test.html</a>
    </p>
    <p>
      {% blocktrans %}
      If you use the local development server, you must enable the django view 'static serve'
      in the file: './PyLucid/urls.py'
      {% endblocktrans %}
    </p>
</fieldset>
</div>
<script type="text/javascript">
/* <![CDATA[ */
// Hide the "check_media" block with a function from the shared_sha_tools.js file.
// If the PyLucid_media_url is wrong and the file is not served correctly, the info
// Block can't hide.
hide_by_id("check_media");
/* ]]> */
</script>
{% block content %}{% endblock %}
{% endblock %}

{% block base_footer %}
{% if not no_menu_link %}<p><a href="{% url PyLucid.install.index.menu . %}">&#xAB; {% trans 'back to menu' %}</a> |{% endif %}
<a href="#top">&#x5E; {% trans 'top' %}</a> | <a href="{% url PyLucid.install.index.logout . %}">{% trans 'Log out' %}</a>
{% if install_pass %}</p>{% endif %}
<hr />
<small>
<p>{% trans 'page stats:' %} <!-- script_duration --></p>
</small>
{% endblock %}
