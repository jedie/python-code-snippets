{% load recurse %}

<ul id="main_menu">
{% for item in menu_data %}
  <li>
    <a href="{{ item.href }}" class="level_{{ item.level }}" title="{{ item.title|escape }}">
        {% if item.is_current_page %}
            <span class="current">{{ item.name|escape }}</span>
        {% else %}
            {{ item.name|escape }}
        {% endif %}
    </a>
    {% if item.subitems %}
        <ul>{% recurse item.subitems %}</ul>
    {% endif %}
  </li>
{% endfor %}
</ul>